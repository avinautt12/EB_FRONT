<app-home-bar></app-home-bar>

<div class="caratula-global-container">
    <h2>Carátula Global</h2>

    <div class="acciones-caratula">
        <button class="btn btn-secondary" [routerLink]="['/inicio-caratulas']">
            <i class="fas fa-arrow-left"></i> Volver
        </button>
    </div>

    <div class="caratula-content">
        <!-- Fecha en la esquina superior derecha -->
        <div class="fecha-header-mejorada">
            <div class="fecha-principal">
                {{ obtenerFechaHoy() }}
            </div>
            <div class="semana-info-mejorada">
                <div class="info-linea">Semana ISO: {{ obtenerSemanaISO() }}</div>
                <div class="info-linea">Día: {{ obtenerDiaTemporada() }}</div>
            </div>
        </div>

        <!-- Sección General -->
        <div class="seccion-general">
            <h3 class="seccion-titulo">a) General</h3>

            <div class="tabla-general">
                <div class="fila-header">
                    <div class="col-categoria">Meta</div>
                    <div class="col-numero">Acumulado Real</div>
                    <div class="col-numero">Avance Proyectado</div>
                    <div class="col-porcentaje">%</div>
                    <div class="col-meta">Acumulado real vs Meta</div>
                </div>

                <div class="fila-data">
                    <div class="col-categoria categoria-comercializadora">
                        <span>Meta Gral. Comercializadora</span>
                    </div>
                    <div class="col-numero">{{ metaPrincipal | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-numero positivo">{{ acumuladoGeneral | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-numero">{{ avance_proyectado_monto3 | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-porcentaje negativo">{{ porcentajeMonto1 | percent:'1.0-0' }}</div>
                </div>

                <div class="fila-separador"></div>

                <div class="fila-data">
                    <div class="col-categoria categoria-cumplimiento">
                        <span>Meta Cumplimiento Categoría</span>
                    </div>
                    <div class="col-numero">{{ totalMetaMY25 | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-numero positivo">{{ totalAcumulado | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-numero">{{ avance_proyectado_monto1 | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-porcentaje positivo">{{ porcentajeMonto2 | percent:'1.0-0' }}</div>
                </div>

                <div class="fila-data">
                    <div class="col-categoria"></div>
                    <div class="col-numero">{{ totalMetaMY25_2 | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-numero positivo">{{ totalAcumulado_2 | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-numero">{{ avance_proyectado_monto2 | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-porcentaje negativo">{{ porcentajeMonto3 | percent:'1.0-0' }}</div>
                </div>
            </div>
        </div>

        <!-- Sección Específico -->
        <div class="seccion-especifico">
            <h3 class="seccion-titulo">b) Específico</h3>

            <div class="tabla-especifico">
                <div class="fila-header-especifico">
                    <div class="col-categoria-esp"></div>
                    <div class="col-numero-esp">Meta</div>
                    <div class="col-numero-esp">Acumulado Real</div>
                    <div class="col-numero-esp">Avance Proyectado</div>
                    <div class="col-avance">% AVANCE META GRAL.</div>
                    <div class="col-avance">% AVANCE PROYECTADO</div>
                </div>

                <div class="fila-categoria scott">
                    <div class="col-categoria-esp categoria-scott">SCOTT</div>
                    <div class="col-numero-esp">{{ metaScott | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-numero-esp">{{ acumuladoScott | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-numero-esp">{{ proyectadoScott | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-avance">
                        <div>
                            {{ ((acumuladoScott / metaScott) * 100) | number:'1.0-0' }}%
                        </div>
                    </div>
                    <div class="col-avance negativo-total">{{ porcentajeScott !== null ? (porcentajeScott/100 | percent:'1.0-0') : 'N/A' }}</div>
                    <div class="col-avance negativo-total">{{ porcentajeScott_2 !== null ? (porcentajeScott_2/100 | percent:'1.0-0') : 'N/A' }}</div>
                </div>

                <div class="fila-categoria apparel">
                    <div class="col-categoria-esp categoria-apparel">APPAREL</div>
                    <div class="col-numero-esp">{{metaApparel | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-numero-esp">{{ acumuladoApparel | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-numero-esp">{{ proyectadoApparel | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-avance">{{ ((acumuladoApparel / metaApparel) * 100) | number:'1.0-0' }}%</div>
                    <div class="col-avance negativo-total">{{ porcentajeApparel !== null ? (porcentajeApparel/100 | percent:'1.0-0') : 'N/A' }}</div>
                    <div class="col-avance negativo-total">{{ porcentajeApparel_2 !== null ? (porcentajeApparel_2/100 | percent:'1.0-0') : 'N/A' }}</div>
                </div>

                <!-- <div class="fila-categoria syncros">
                    <div class="col-categoria-esp categoria-syncros">SYNCROS</div>
                    <div class="col-numero-esp">{{metaSyncros | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-numero-esp">$ -</div>
                    <div class="col-numero-esp">{{ proyectadoSyncros | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-avance">0%</div>
                    <div class="col-avance negativo-total">-100%</div>
                    <div class="col-avance negativo-total">-100%</div>
                </div>

                <div class="fila-categoria vittoria">
                    <div class="col-categoria-esp categoria-vittoria">VITTORIA</div>
                    <div class="col-numero-esp">{{metaVittorria | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-numero-esp">$ -</div>
                    <div class="col-numero-esp">{{ proyectadoVittoria | currency:'USD':'symbol':'1.2-2'}}</div>
                    <div class="col-avance">0%</div>
                    <div class="col-avance negativo-total">-100%</div>
                    <div class="col-avance negativo-total">-100%</div>
                </div> -->
<!-- 
                <div class="fila-categoria otros">
                    <div class="col-categoria-esp categoria-otros">Otros / Productos Antiguos</div>
                    <div class="col-numero-esp"></div>
                    <div class="col-numero-esp amarillo">$ -</div>
                    <div class="col-numero-esp"></div>
                    <div class="col-avance"></div>
                    <div class="col-avance error"></div>
                </div> -->

                <div class="fila-diferencia">
                    <div class="col-categoria-esp">Diferencia</div>
                    <div class="col-numero-esp"></div>
                    <div class="col-numero-esp">{{ (acumuladoScott) + (acumuladoApparel)| currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-numero-esp">{{ ((acumuladoScott) + (acumuladoApparel)) - (acumuladoGeneral) | currency:'USD':'symbol':'1.2-2' }}</div>
                    <div class="col-avance"></div>
                    <div class="col-avance"></div>
                </div>
            </div>
        </div>
    </div>
</div>